<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>跛足的登山者</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.liuyong520.cn/"/>
  <updated>2019-04-28T08:58:06.799Z</updated>
  <id>http://www.liuyong520.cn/</id>
  
  <author>
    <name>xxydliuy</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexo博客主题优化</title>
    <link href="http://www.liuyong520.cn/2017/08/29/hexo-promise/"/>
    <id>http://www.liuyong520.cn/2017/08/29/hexo-promise/</id>
    <published>2017-08-29T02:56:51.000Z</published>
    <updated>2019-04-28T08:58:06.799Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Apr 28 2019 16:58:30 GMT+0800 (GMT+08:00) --><p>在介绍博客主题优化这个话题之前，我想先介绍hexo主题的大体结构，便于后面将主题优化方面的东西。</p><h2 id="hexo主题结构"><a href="#hexo主题结构" class="headerlink" title="hexo主题结构"></a>hexo主题结构</h2><p>我这里选用pure主题为例进行讲解。</p><ol><li>进入themes/pure文件夹下执行如下命令<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── LICENSE</span><br><span class="line">├── README.cn.md</span><br><span class="line">├── README.md</span><br><span class="line">├── _config.yml #主题主配置文件</span><br><span class="line">├── _config.yml.example #主题配置文件例子</span><br><span class="line">├── _source #博客页面例子文件夹</span><br><span class="line">│   ├── 404 #博客404页面只要拷贝到站点soure就行</span><br><span class="line">│   │   └── index.md</span><br><span class="line">│   ├── _data #博客友情链接页面</span><br><span class="line">│   │   ├── gallery.yml</span><br><span class="line">│   │   └── links.yml</span><br><span class="line">│   ├── about #博客关于页面</span><br><span class="line">│   │   └── index.md</span><br><span class="line">│   ├── books #博客书单页面</span><br><span class="line">│   │   └── index.md</span><br><span class="line">│   ├── categories #博客分类页面</span><br><span class="line">│   │   └── index.md</span><br><span class="line">│   ├── links #博客友情链接</span><br><span class="line">│   │   └── index.md</span><br><span class="line">│   ├── repository #博客仓库模版页面</span><br><span class="line">│   │   └── index.md</span><br><span class="line">│   └── tags #博客标签页面</span><br><span class="line">│       └── index.md</span><br><span class="line">├── languages #博客语言切换配置文件夹</span><br><span class="line">│   ├── default.yml</span><br><span class="line">│   ├── en.yml</span><br><span class="line">│   ├── zh-CN.yml</span><br><span class="line">│   └── zh-TW.yml</span><br><span class="line">├── layout #博客布局文件夹 这里就是生成页面的精华部分了</span><br><span class="line">│   ├── _common</span><br><span class="line">│   │   ├── footer.ejs</span><br><span class="line">│   │   ├── head.ejs</span><br><span class="line">│   │   ├── header.ejs</span><br><span class="line">│   │   ├── script.ejs</span><br><span class="line">│   │   └── social.ejs</span><br><span class="line">│   ├── _partial</span><br><span class="line">│   │   ├── archive-book.ejs</span><br><span class="line">│   │   ├── archive-category.ejs</span><br><span class="line">│   │   ├── archive-link.ejs</span><br><span class="line">│   │   ├── archive-list.ejs</span><br><span class="line">│   │   ├── archive-post.ejs</span><br><span class="line">│   │   ├── archive-repository.ejs</span><br><span class="line">│   │   ├── archive-tag.ejs</span><br><span class="line">│   │   ├── archive.ejs</span><br><span class="line">│   │   ├── article-about.ejs</span><br><span class="line">│   │   ├── article.ejs</span><br><span class="line">│   │   ├── item-post.ejs</span><br><span class="line">│   │   ├── pagination.ejs</span><br><span class="line">│   │   ├── post</span><br><span class="line">│   │   │   ├── category.ejs</span><br><span class="line">│   │   │   ├── comment.ejs</span><br><span class="line">│   │   │   ├── copyright.ejs</span><br><span class="line">│   │   │   ├── date.ejs</span><br><span class="line">│   │   │   ├── donate.ejs</span><br><span class="line">│   │   │   ├── gallery.ejs</span><br><span class="line">│   │   │   ├── nav.ejs</span><br><span class="line">│   │   │   ├── pv.ejs</span><br><span class="line">│   │   │   ├── tag.ejs</span><br><span class="line">│   │   │   ├── thumbnail.ejs</span><br><span class="line">│   │   │   ├── title.ejs</span><br><span class="line">│   │   │   └── wordcount.ejs</span><br><span class="line">│   │   ├── sidebar-about.ejs</span><br><span class="line">│   │   ├── sidebar-toc.ejs</span><br><span class="line">│   │   └── sidebar.ejs</span><br><span class="line">│   ├── _script</span><br><span class="line">│   │   ├── _analytics</span><br><span class="line">│   │   │   ├── baidu-analytics.ejs</span><br><span class="line">│   │   │   ├── google-analytics.ejs</span><br><span class="line">│   │   │   └── tencent-analytics.ejs</span><br><span class="line">│   │   ├── _comment</span><br><span class="line">│   │   │   ├── disqus.ejs</span><br><span class="line">│   │   │   ├── gitalk.ejs</span><br><span class="line">│   │   │   ├── gitment.ejs</span><br><span class="line">│   │   │   ├── livere.ejs</span><br><span class="line">│   │   │   ├── valine.ejs</span><br><span class="line">│   │   │   └── youyan.ejs</span><br><span class="line">│   │   ├── _search</span><br><span class="line">│   │   │   ├── baidu.ejs</span><br><span class="line">│   │   │   └── insight.ejs</span><br><span class="line">│   │   ├── analytics.ejs</span><br><span class="line">│   │   ├── comment.ejs</span><br><span class="line">│   │   ├── douban.ejs</span><br><span class="line">│   │   ├── fancybox.ejs</span><br><span class="line">│   │   ├── mathjax.ejs</span><br><span class="line">│   │   ├── pv.ejs</span><br><span class="line">│   │   ├── repository.ejs</span><br><span class="line">│   │   └── search.ejs</span><br><span class="line">│   ├── _search</span><br><span class="line">│   │   ├── baidu.ejs</span><br><span class="line">│   │   ├── index-mobile.ejs</span><br><span class="line">│   │   ├── index.ejs</span><br><span class="line">│   │   ├── insight.ejs</span><br><span class="line">│   │   └── swiftype.ejs</span><br><span class="line">│   ├── _widget</span><br><span class="line">│   │   ├── archive.ejs</span><br><span class="line">│   │   ├── board.ejs</span><br><span class="line">│   │   ├── category.ejs</span><br><span class="line">│   │   ├── recent_posts.ejs</span><br><span class="line">│   │   ├── tag.ejs</span><br><span class="line">│   │   └── tagcloud.ejs</span><br><span class="line">│   ├── about.ejs</span><br><span class="line">│   ├── archive.ejs</span><br><span class="line">│   ├── books.ejs</span><br><span class="line">│   ├── categories.ejs</span><br><span class="line">│   ├── category.ejs</span><br><span class="line">│   ├── index.ejs</span><br><span class="line">│   ├── layout.ejs</span><br><span class="line">│   ├── links.ejs</span><br><span class="line">│   ├── page.ejs</span><br><span class="line">│   ├── post.ejs</span><br><span class="line">│   ├── repository.ejs</span><br><span class="line">│   ├── tag.ejs</span><br><span class="line">│   └── tags.ejs</span><br><span class="line">├── package.json</span><br><span class="line">├── screenshot #主题颜色切换背景</span><br><span class="line">│   ├── pure-theme-black.png</span><br><span class="line">│   ├── pure-theme-blue.png</span><br><span class="line">│   ├── pure-theme-green.png</span><br><span class="line">│   ├── pure-theme-purple.png</span><br><span class="line">│   ├── pure.png</span><br><span class="line">│   └── pure.psd</span><br><span class="line">├── scripts</span><br><span class="line">│   └── thumbnail.js</span><br><span class="line">└── source #主题静态资源文件目录</span><br><span class="line">    ├── css</span><br><span class="line">    │   ├── style.css</span><br><span class="line">    │   └── style.min.css</span><br><span class="line">    ├── favicon.png</span><br><span class="line">    ├── fonts</span><br><span class="line">    │   ├── README.md</span><br><span class="line">    │   ├── iconfont.eot</span><br><span class="line">    │   ├── iconfont.svg</span><br><span class="line">    │   ├── iconfont.ttf</span><br><span class="line">    │   └── iconfont.woff</span><br><span class="line">    ├── images</span><br><span class="line">    │   ├── avatar.jpg</span><br><span class="line">    │   ├── avatar.jpg1</span><br><span class="line">    │   ├── donate</span><br><span class="line">    │   │   ├── alipayimg.png</span><br><span class="line">    │   │   └── wechatpayimg.png</span><br><span class="line">    │   ├── favatar</span><br><span class="line">    │   │   ├── SzsFox-logo.png</span><br><span class="line">    │   │   ├── chuangzaoshi-logo.png</span><br><span class="line">    │   │   └── idesign-logo.png</span><br><span class="line">    │   ├── thumb-default.png</span><br><span class="line">    │   └── xingqiu-qrcode.jpg</span><br><span class="line">    └── js</span><br><span class="line">        ├── application.js</span><br><span class="line">        ├── application.min.js</span><br><span class="line">        ├── insight.js</span><br><span class="line">        ├── jquery.min.js</span><br><span class="line">        ├── plugin.js</span><br><span class="line">        ├── plugin.js.map</span><br><span class="line">        └── plugin.min.js</span><br><span class="line"></span><br><span class="line">29 directories, 125 files</span><br></pre></td></tr></table></figure></li></ol><p>layout里面的文件使用ejs （js模版语言）<a href="https://ejs.bootcss.com/" target="_blank" rel="noopener">ejs官网</a>实现的，里面把整个页面通过js抽取各个小的模块模版文件，同时数据和标签页面是分离的，所以在页面里面可以加载config.yml 里面的配置。</p><p>整个页面入口文件就是layout.js<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&lt;%= config.language ? &quot; lang=&quot; + config.language.substring(0, 2) : &quot;&quot;%&gt;&gt;</span><br><span class="line">&lt;%- partial(&apos;_common/head&apos;, &#123;post: page&#125;) %&gt;</span><br><span class="line">##这里会判断是否启用layout配置</span><br><span class="line">&lt;% </span><br><span class="line">var bodyClass = &apos;main-center&apos;; </span><br><span class="line">if (theme.config.layout) &#123;</span><br><span class="line">bodyClass = theme.config.layout;</span><br><span class="line">&#125;</span><br><span class="line">  if (theme.config.skin) &#123;</span><br><span class="line">    bodyClass += &apos; &apos; + theme.config.skin;</span><br><span class="line">  &#125;</span><br><span class="line">bodyClass = page.sidebar === &apos;none&apos; ? (bodyClass + &apos; no-sidebar&apos;) : bodyClass;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;body class=&quot;&lt;%= bodyClass %&gt;&quot; itemscope itemtype=&quot;http://schema.org/WebPage&quot;&gt;</span><br><span class="line">  &lt;%- partial(&apos;_common/header&apos;, null, &#123;cache: !config.relative_link&#125;) %&gt;</span><br><span class="line">  &lt;% if (theme.sidebar &amp;&amp; (page.sidebar!=&apos;none&apos; || page.sidebar!=&apos;custom&apos;))&#123; %&gt;</span><br><span class="line">    &lt;% if (theme.config.toc &amp;&amp; page.toc)&#123; %&gt;</span><br><span class="line">    &lt;%- partial(&apos;_partial/sidebar-toc&apos;, &#123;post: page&#125;) %&gt;</span><br><span class="line">    &lt;% &#125;else&#123; %&gt;</span><br><span class="line">    &lt;%- partial(&apos;_partial/sidebar&apos;, null, &#123;cache: !config.relative_link&#125;) %&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  &lt;%- body %&gt;</span><br><span class="line">  &lt;%- partial(&apos;_common/footer&apos;, null, &#123;cache: !config.relative_link&#125;) %&gt;</span><br><span class="line">  &lt;%- partial(&apos;_common/script&apos;, &#123;post: page&#125;) %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p></p><p>其中&lt;%- partial(‘_common/footer’, null, {cache: !config.relative_link}) %&gt; 表示引入子模块_common/footer.ejs文件，{cache: !config.relative_link}表示参数<br>我们的创建的博客文章都会加载这个布局文件。</p><ol start="2"><li><p>我们新创建的博客文章有如下的配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">title: 文章标题</span><br><span class="line">categories:</span><br><span class="line">  - 文章分类</span><br><span class="line">tags:</span><br><span class="line">  - 文章标签</span><br><span class="line">toc: true # 是否启用内容索引</span><br><span class="line">comment:true #是否启用评论</span><br><span class="line">layout:模版文件，如果没有默认不加载任何模版</span><br><span class="line">sidebar: none # 是否启用sidebar侧边栏，none：不启用，不配置默认启动</span><br></pre></td></tr></table></figure><p>以上配置属于page 域的配置文件属于单个页面的，而config.language 这种是全局配置文件（也就是站点配置文件config.yml），每个页面都能使用。theme.config 加载的就是主题的配置文件config.yml 文件。</p><ol start="3"><li>主题配置文件config.yml<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"> # menu</span><br><span class="line">menu:</span><br><span class="line">  Home: .</span><br><span class="line">  Archives: archives  # 归档</span><br><span class="line">  Categories: categories  # 分类</span><br><span class="line">  Tags: tags  # 标签</span><br><span class="line">  Repository: repository  # github repositories</span><br><span class="line">  Books: books  # 豆瓣书单</span><br><span class="line">  Links: links  # 友链</span><br><span class="line">  About: about  # 关于</span><br><span class="line"></span><br><span class="line"># Enable/Disable menu icons</span><br><span class="line">menu_icons:</span><br><span class="line">  enable: true  # 是否启用导航菜单图标</span><br><span class="line">  home: icon-home-fill</span><br><span class="line">  archives: icon-archives-fill</span><br><span class="line">  categories: icon-folder</span><br><span class="line">  tags: icon-tags</span><br><span class="line">  repository: icon-project</span><br><span class="line">  books: icon-book-fill</span><br><span class="line">  links: icon-friendship</span><br><span class="line">  about: icon-cup-fill</span><br><span class="line"></span><br><span class="line"># rss</span><br><span class="line">rss: /atom.xml</span><br><span class="line"></span><br><span class="line"># Site</span><br><span class="line">site:</span><br><span class="line">  logo:</span><br><span class="line">    enabled: true</span><br><span class="line">    width: 40</span><br><span class="line">    height: 40</span><br><span class="line">    url: ../images/logo.png</span><br><span class="line">  title: Hexo # 页面title</span><br><span class="line">  favicon: /favicon.png</span><br><span class="line">  board: &lt;p&gt;欢迎交流与分享经验!&lt;/p&gt; # 站点公告</span><br><span class="line">  copyright: false # 底部版权信息</span><br><span class="line"></span><br><span class="line"># config</span><br><span class="line">config:</span><br><span class="line">  skin: theme-black # 主题颜色 theme-black theme-blue theme-green theme-purple</span><br><span class="line">  layout: main-center # 布局方式 main-left main-center main-right</span><br><span class="line">  toc: true # 是否开启文章章节目录导航</span><br><span class="line">  menu_highlight: false # 是否开启当前菜单高亮显示</span><br><span class="line">  thumbnail: false # enable posts thumbnail, options: true, false</span><br><span class="line">  excerpt_link: Read More</span><br><span class="line"></span><br><span class="line"># Pagination 分页</span><br><span class="line">pagination:</span><br><span class="line">  number: false #是否开启数字</span><br><span class="line">  prev: </span><br><span class="line">    alwayShow: true</span><br><span class="line">  next:</span><br><span class="line">    alwayShow: true</span><br><span class="line"></span><br><span class="line"># Sidebar</span><br><span class="line">sidebar: right</span><br><span class="line">widgets:</span><br><span class="line">  - board  </span><br><span class="line">  - category</span><br><span class="line">  - tag</span><br><span class="line">  - tagcloud</span><br><span class="line">  - archive</span><br><span class="line">  - recent_posts</span><br><span class="line"></span><br><span class="line"># display widgets at the bottom of index pages (pagination == 2)</span><br><span class="line">index_widgets:</span><br><span class="line"># - category</span><br><span class="line"># - tagcloud</span><br><span class="line"># - archive  </span><br><span class="line"></span><br><span class="line"># widget behavior</span><br><span class="line">archive_type: &apos;monthly&apos;</span><br><span class="line">show_count: true</span><br><span class="line"></span><br><span class="line"># Fancybox</span><br><span class="line">fancybox: false</span><br><span class="line"></span><br><span class="line"># Search</span><br><span class="line">search:</span><br><span class="line">  insight: true # you need to install `hexo-generator-json-content` before using Insight Search</span><br><span class="line">  baidu: false # you need to disable other search engines to use Baidu search, options: true, false</span><br><span class="line"></span><br><span class="line"># Donate</span><br><span class="line">donate:</span><br><span class="line">  enable: true</span><br><span class="line">  # 微信打赏</span><br><span class="line">  wechatpay:</span><br><span class="line">    qrcode: images/donate/wechatpayimg.png</span><br><span class="line">    title: 微信支付</span><br><span class="line">  # 支付宝打赏</span><br><span class="line">  alipay: </span><br><span class="line">    qrcode: images/donate/alipayimg.png </span><br><span class="line">    title: 支付宝</span><br><span class="line"></span><br><span class="line"># Share</span><br><span class="line"># weibo,qq,qzone,wechat,tencent,douban,diandian,facebook,twitter,google,linkedin</span><br><span class="line">share:</span><br><span class="line">  enable: true  # 是否启用分享</span><br><span class="line">  sites: weibo,qq,wechat,facebook,twitter  # PC端显示的分享图标</span><br><span class="line">  mobile_sites: weibo,qq,qzone  # 移动端显示的分享图标</span><br><span class="line"></span><br><span class="line"># Github</span><br><span class="line">github: </span><br><span class="line">  username: ***</span><br><span class="line"></span><br><span class="line"># Comment</span><br><span class="line"># Gitment</span><br><span class="line"># Introduction: https://imsun.net/posts/gitment-introduction/</span><br><span class="line">comment:</span><br><span class="line">  type: youyan</span><br><span class="line">  disqus: # enter disqus shortname here</span><br><span class="line">  youyan: </span><br><span class="line">    uid: 1783844 # enter youyan uid </span><br><span class="line">  livere:</span><br><span class="line">    uid: # enter youyan uid </span><br><span class="line">  gitment:</span><br><span class="line">    githubID: </span><br><span class="line">    repo: </span><br><span class="line">    ClientID: </span><br><span class="line">    ClientSecret: </span><br><span class="line">    lazy: false</span><br><span class="line">  gitalk: # gitalk. https://gitalk.github.io/</span><br><span class="line">    owner:  #必须. GitHub repository 所有者，可以是个人或者组织。</span><br><span class="line">    admin:  #必须. GitHub repository 的所有者和合作者 (对这个 repository 有写权限的用户)。</span><br><span class="line">    repo:  #必须. GitHub repository.</span><br><span class="line">    ClientID:  #必须. GitHub Application Client ID.</span><br><span class="line">    ClientSecret:  #必须. GitHub Application Client Secret.</span><br><span class="line">  valine: # Valine. https://valine.js.org</span><br><span class="line">    appid:  # your leancloud application appid</span><br><span class="line">    appkey:  # your leancloud application appkey</span><br><span class="line">    notify: false # mail notifier , https://github.com/xCss/Valine/wiki</span><br><span class="line">    verify: false # Verification code</span><br><span class="line">    placeholder: Just go go # comment box placeholder</span><br><span class="line">    avatar: mm # gravatar style</span><br><span class="line">    meta: nick,mail,link # custom comment header</span><br><span class="line">    pageSize: 10 # pagination size</span><br><span class="line">    visitor: false # Article reading statistic https://valine.js.org/visitor.html</span><br><span class="line"></span><br><span class="line"># douban 豆瓣书单</span><br><span class="line"># Api：</span><br><span class="line">  # https://developers.douban.com/wiki/?title=book_v2 图书</span><br><span class="line">  # https://developers.douban.com/wiki/?title=movie_v2 电影</span><br><span class="line"># books：  </span><br><span class="line">  # https://api.douban.com/v2/book/user/:name/collections?start=0&amp;count=100 个人书单列表</span><br><span class="line"># movies: </span><br><span class="line">  # https://api.douban.com/v2/movie/in_theaters 正在上映的电影</span><br><span class="line">  # https://api.douban.com/v2/movie/coming_soon 即将上映的电影</span><br><span class="line">  # https://api.douban.com/v2/movie/subject/:id 单个电影信息</span><br><span class="line">  # https://api.douban.com/v2/movie/search?q=&#123;text&#125; 电影搜索</span><br><span class="line">douban:</span><br><span class="line">  user: # 豆瓣用户名</span><br><span class="line">  start: 0 # 从哪一条记录开始</span><br><span class="line">  count: 100 # 获取豆瓣书单数据条数</span><br><span class="line">  </span><br><span class="line"># PV</span><br><span class="line">pv:</span><br><span class="line">  busuanzi:</span><br><span class="line">    enable: false  # 不蒜子统计</span><br><span class="line">  leancloud:</span><br><span class="line">    enable: false  # leancloud统计</span><br><span class="line">    app_id: # leancloud &lt;AppID&gt;</span><br><span class="line">    app_key: # leancloud &lt;AppKey&gt;</span><br><span class="line">        </span><br><span class="line"># wordcount</span><br><span class="line">postCount:</span><br><span class="line">  enable: false</span><br><span class="line">  wordcount: true  # 文章字数统计</span><br><span class="line">  min2read: true  # 阅读时长预计 </span><br><span class="line"></span><br><span class="line"># Plugins</span><br><span class="line">plugins:</span><br><span class="line">  google_analytics: # enter the tracking ID for your Google Analytics</span><br><span class="line">  google_site_verification: # enter Google site verification code</span><br><span class="line">  baidu_analytics: # enter Baidu Analytics hash key</span><br><span class="line">  tencent_analytics: </span><br><span class="line">  </span><br><span class="line"># Miscellaneous</span><br><span class="line">twitter:</span><br><span class="line">google_plus:</span><br><span class="line">fb_admins:</span><br><span class="line">fb_app_id:  </span><br><span class="line">  </span><br><span class="line"># profile</span><br><span class="line">profile:</span><br><span class="line">  enabled: true # Whether to show profile bar</span><br><span class="line">  avatar: images/avatar.jpg</span><br><span class="line">  gravatar: # Gravatar email address, if you enable Gravatar, your avatar config will be overriden</span><br><span class="line">  author: 昵称</span><br><span class="line">  author_title: Web Developer &amp; Designer</span><br><span class="line">  author_description: 个人简介。</span><br><span class="line">  location: Shenzhen, China</span><br><span class="line">  follow: https://github.com/cofess</span><br><span class="line">  # Social Links</span><br><span class="line">  social:</span><br><span class="line">    links:</span><br><span class="line">      github: https://github.com/cofess</span><br><span class="line">      weibo: http://weibo.com/cofess</span><br><span class="line">      twitter: https://twitter.com/iwebued</span><br><span class="line">      # facebook: /</span><br><span class="line">      # dribbble: /</span><br><span class="line">      behance: https://www.behance.net/cofess</span><br><span class="line">      rss: atom.xml</span><br><span class="line">    link_tooltip: true # enable the social link tooltip, options: true, false</span><br><span class="line">  # My Skills </span><br><span class="line">  skills:</span><br><span class="line">    Git: ★★★☆☆</span><br><span class="line">    Gulp: ★★★☆☆</span><br><span class="line">    Javascript: ★★★☆☆</span><br><span class="line">    HTML+CSS: ★★★☆☆</span><br><span class="line">    Bootstrap: ★★★☆☆</span><br><span class="line">    ThinkPHP: ★★★☆☆</span><br><span class="line">    平面设计: ★★★☆☆</span><br><span class="line">  # My Personal Links</span><br><span class="line">  links:</span><br><span class="line">    Github: https://github.com/cofess</span><br><span class="line">    Blog: http://blog.cofess.com</span><br><span class="line">    微博: http://weibo.com/cofess</span><br><span class="line">    花瓣: http://huaban.com/cofess</span><br><span class="line">    Behance: https://www.behance.net/cofess</span><br><span class="line">  # My Personal Labels</span><br><span class="line">  labels:</span><br><span class="line">    - 前端</span><br><span class="line">    - 前端开发</span><br><span class="line">    - 前端重构</span><br><span class="line">    - Web前端</span><br><span class="line">    - 网页重构</span><br><span class="line">  # My Personal Works</span><br><span class="line">  works:</span><br><span class="line">    name:</span><br><span class="line">      link: http://www.example.com</span><br><span class="line">      date: 2016</span><br><span class="line">  # My Personal Projects</span><br><span class="line">  projects:</span><br><span class="line">    cofess/gulp-startpro: https://github.com/cofess/gulp-startpro</span><br><span class="line">    cofess/hexo-theme-pure: https://github.com/cofess/hexo-theme-pure</span><br></pre></td></tr></table></figure></li></ol><p>基本上每个配置做什么用的，配置文件里面基本写了注解。也很容易理解。<br>如果还不是很能理解配置项。可以查看<a href="https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md" target="_blank" rel="noopener">https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md</a> 文件。<br>至此，hexo模版的大体结构已经清楚了。</p><h3 id="主题优化"><a href="#主题优化" class="headerlink" title="主题优化"></a>主题优化</h3><h4 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h4><p>在config.yml 文件中修改</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> # Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: pure</span><br></pre></td></tr></table></figure></li></ol><h4 id="修改语言"><a href="#修改语言" class="headerlink" title="修改语言"></a>修改语言</h4><p>在config.yml 文件中修改<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Site</span><br><span class="line">language: zh-CN #修改成中文</span><br></pre></td></tr></table></figure><p></p><h4 id="添加Rss订阅"><a href="#添加Rss订阅" class="headerlink" title="添加Rss订阅"></a>添加Rss订阅</h4><ol><li><p>安装feed插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure></li><li><p>在config.yml添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> # Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">#RSS订阅</span><br><span class="line">plugin:</span><br><span class="line">- hexo-generator-feed</span><br></pre></td></tr></table></figure></li><li><p>设置feed插件参数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> #Feed Atom</span><br><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20</span><br></pre></td></tr></table></figure></li><li><p>生成预览</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>预览下就是如下<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556433596798.png" alt="rss订阅"></p><h4 id="添加站点地图"><a href="#添加站点地图" class="headerlink" title="添加站点地图"></a>添加站点地图</h4><p>站点地图是一种文件，您可以通过该文件列出您网站上的网页，从而将您网站内容的组织架构告知Google和其他搜索引擎。Googlebot等搜索引擎网页抓取工具会读取此文件，以便更加智能地抓取您的网站</p><ol><li>分别安装百度和google插件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure></li></ol></li></ol><ol start="2"><li><p>在博客目录的_config.yml中添加如下代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 自动生成sitemap</span><br><span class="line">sitemap:</span><br><span class="line">path: sitemap.xml</span><br><span class="line">baidusitemap:</span><br><span class="line">path: baidusitemap.xml</span><br></pre></td></tr></table></figure></li><li><p>编译你的博客</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure></li></ol><p>如果你在你的博客根目录的public下面发现生成了sitemap.xml以及baidusitemap.xml就表示成功了,在本地访问 <a href="http://127.0.0.4000/sitemap.xml" target="_blank" rel="noopener">http://127.0.0.4000/sitemap.xml</a> 和 <a href="http://127.0.0.4000/baidusitemap.xml" target="_blank" rel="noopener">http://127.0.0.4000/baidusitemap.xml</a> 就能正确的展示出两个sitemap 文件了。</p><ol start="4"><li>注册百度站长平台<br>4.1 访问：<a href="https://ziyuan.baidu.com/linksubmit/index" target="_blank" rel="noopener">https://ziyuan.baidu.com/linksubmit/index</a><br>4.2 提交链接<br>提交链接方式有主动推送、自动推送、sitemap、手动上传等。<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556435172481.png" alt="enter description here"><br>4.3主动推送<br>安装对应提交插件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-baidu-url-submit --save</span><br></pre></td></tr></table></figure></li></ol><p>修改配置：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">##配置插件</span><br><span class="line">plugin:</span><br><span class="line">- hexo-generator-baidu-sitemap</span><br><span class="line">- hexo-generator-sitemap</span><br><span class="line">- hexo-baidu-url-submit</span><br><span class="line"></span><br><span class="line">baidu_url_submit:</span><br><span class="line">  ## 比如3，代表提交最新的三个链接</span><br><span class="line">  count: 3</span><br><span class="line">  # 在百度站长平台中注册的域名</span><br><span class="line">  host: www.liuyong520.cn </span><br><span class="line">  ## 请注意这是您的秘钥， 请不要发布在公众仓库里!</span><br><span class="line">  token: upR0BjzCYxTC2CPq </span><br><span class="line">  ## 文本文档的地址， 新链接会保存在此文本文档里</span><br><span class="line">  path: baidu_urls.txt</span><br></pre></td></tr></table></figure><p></p><p>编译博客<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p></p><p>如果出现下图即表示成功了<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556435593425.png" alt="enter description here"></p><p>4.4 自动推送<br>将如下代码添加到head.ejs中即可生效<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   (function()&#123;</span><br><span class="line">       var bp = document.createElement(&apos;script&apos;);</span><br><span class="line">       var curProtocol = window.location.protocol.split(&apos;:&apos;)[0];</span><br><span class="line">       if (curProtocol === &apos;https&apos;) &#123;</span><br><span class="line">           bp.src = &apos;https://zz.bdstatic.com/linksubmit/push.js&apos;;        </span><br><span class="line">       &#125;</span><br><span class="line">       else &#123;</span><br><span class="line">           bp.src = &apos;http://push.zhanzhang.baidu.com/push.js&apos;;</span><br><span class="line">       &#125;</span><br><span class="line">       var s = document.getElementsByTagName(&quot;script&quot;)[0];</span><br><span class="line">       s.parentNode.insertBefore(bp, s);</span><br><span class="line">   &#125;)();</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure><p></p><p>4.5 sitemap 提交方式<br>打开百度站长平台，点击sitemap，填入我们的sitemap文件路径：&lt;域名&gt;/&lt;sitemap名字&gt;如下<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556435919259.png" alt="sitemap"><br>提交即可.<br>但是此时你的域名其实并没有被百度站长所收录：<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556436053972.png" alt="enter description here"><br>百度依然检索不到你的网站，需要10多个工作日之后才能审核通过。</p><ol start="5"><li><p>绑定站点到熊掌ID，这样熊掌ID站点管理里面就能看到相关站点数据了<br>登录站长平台，注册熊掌ID，提交审核过后<br>点击站点收录：<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556436351784.png" alt="enter description here"><br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556436435701.png" alt="enter description here"></p><h4 id="静态资源压缩"><a href="#静态资源压缩" class="headerlink" title="静态资源压缩"></a>静态资源压缩</h4><p>hexo 的文章是通过md格式的文件经过swig转换成的html，生成的html会有很多空格，而且自己写的js以及css中会有很多的空格和注释。<br>js和java不一样，注释也会影响一部分的性能，空格同样是的。<br>静态资源压缩也有多种手段：有gulp插件和hexo自带的neat插件。</p><h5 id="1-hexo-neat-插件："><a href="#1-hexo-neat-插件：" class="headerlink" title="1.hexo-neat 插件："></a>1.hexo-neat 插件：</h5></li><li><p>安装hexo-neat插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-neat --save</span><br></pre></td></tr></table></figure></li><li><p>修改站点配置文件_config.yml：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> # hexo-neat</span><br><span class="line"># 博文压缩</span><br><span class="line">neat_enable: true</span><br><span class="line"># 压缩html</span><br><span class="line">neat_html:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line"># 压缩css  </span><br><span class="line">neat_css:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line">    - &apos;**/*.min.css&apos;</span><br><span class="line"># 压缩js</span><br><span class="line">neat_js:</span><br><span class="line">  enable: true</span><br><span class="line">  mangle: true</span><br><span class="line">  output:</span><br><span class="line">  compress:</span><br><span class="line">  exclude:</span><br><span class="line">    - &apos;**/*.min.js&apos;</span><br><span class="line">    - &apos;**/jquery.fancybox.pack.js&apos;</span><br><span class="line">    - &apos;**/index.js&apos;</span><br></pre></td></tr></table></figure></li><li><p>编译博客</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g </span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h5 id="gulp插件方式"><a href="#gulp插件方式" class="headerlink" title="gulp插件方式"></a>gulp插件方式</h5></li><li>安装gulp及相关插件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp -g</span><br><span class="line">npm install gulp-minify-css --save</span><br><span class="line">npm install gulp-uglify --save</span><br><span class="line">npm install gulp-htmlmin --save</span><br><span class="line">npm install gulp-htmlclean --save</span><br><span class="line">npm install gulp-imagemin --save</span><br></pre></td></tr></table></figure></li></ol><p>在 Hexo 站点下新建 gulpfile.js文件，文件内容如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">var gulp = require(&apos;gulp&apos;);</span><br><span class="line">var minifycss = require(&apos;gulp-minify-css&apos;);</span><br><span class="line">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class="line">var htmlmin = require(&apos;gulp-htmlmin&apos;);</span><br><span class="line">var htmlclean = require(&apos;gulp-htmlclean&apos;);</span><br><span class="line">var imagemin = require(&apos;gulp-imagemin&apos;);</span><br><span class="line">// 压缩css文件</span><br><span class="line">gulp.task(&apos;minify-css&apos;, function() &#123;</span><br><span class="line">  return gulp.src(&apos;./public/**/*.css&apos;)</span><br><span class="line">  .pipe(minifycss())</span><br><span class="line">  .pipe(gulp.dest(&apos;./public&apos;));</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩html文件</span><br><span class="line">gulp.task(&apos;minify-html&apos;, function() &#123;</span><br><span class="line">  return gulp.src(&apos;./public/**/*.html&apos;)</span><br><span class="line">  .pipe(htmlclean())</span><br><span class="line">  .pipe(htmlmin(&#123;</span><br><span class="line">    removeComments: true,</span><br><span class="line">    minifyJS: true,</span><br><span class="line">    minifyCSS: true,</span><br><span class="line">    minifyURLs: true,</span><br><span class="line">  &#125;))</span><br><span class="line">  .pipe(gulp.dest(&apos;./public&apos;))</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩js文件</span><br><span class="line">gulp.task(&apos;minify-js&apos;, function() &#123;</span><br><span class="line">    return gulp.src([&apos;./public/**/.js&apos;,&apos;!./public/js/**/*min.js&apos;])</span><br><span class="line">        .pipe(uglify())</span><br><span class="line">        .pipe(gulp.dest(&apos;./public&apos;));</span><br><span class="line">&#125;);</span><br><span class="line">// 压缩 public/demo 目录内图片</span><br><span class="line">gulp.task(&apos;minify-images&apos;, function() &#123;</span><br><span class="line">    gulp.src(&apos;./public/demo/**/*.*&apos;)</span><br><span class="line">        .pipe(imagemin(&#123;</span><br><span class="line">           optimizationLevel: 5, //类型：Number  默认：3  取值范围：0-7（优化等级）</span><br><span class="line">           progressive: true, //类型：Boolean 默认：false 无损压缩jpg图片</span><br><span class="line">           interlaced: false, //类型：Boolean 默认：false 隔行扫描gif进行渲染</span><br><span class="line">           multipass: false, //类型：Boolean 默认：false 多次优化svg直到完全优化</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&apos;./public/uploads&apos;));</span><br><span class="line">&#125;);</span><br><span class="line">// 默认任务</span><br><span class="line">gulp.task(&apos;default&apos;, [</span><br><span class="line">  &apos;minify-html&apos;,&apos;minify-css&apos;,&apos;minify-js&apos;,&apos;minify-images&apos;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p></p><p>只需要每次在执行 generate 命令后执行 gulp 就可以实现对静态资源的压缩，压缩完成后执行 deploy 命令同步到服务器：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">gulp</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p></p><h4 id="修改访问URL路径"><a href="#修改访问URL路径" class="headerlink" title="修改访问URL路径"></a>修改访问URL路径</h4><p>默认情况下访问URL路径为：domain/2018/10/18/关于本站,修改为 domain/About/关于本站。 编辑 Hexo 站点下的 _config.yml 文件，修改其中的 permalink字段：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">permalink: :category/:title/</span><br></pre></td></tr></table></figure><p></p><h4 id="博文置顶"><a href="#博文置顶" class="headerlink" title="博文置顶"></a>博文置顶</h4><ol><li>安装插件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure></li></ol><p>然后在需要置顶的文章的Front-matter中加上top即可：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--</span><br><span class="line">title: 2018</span><br><span class="line">date: 2018-10-25 16:10:03</span><br><span class="line">top: 10</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p></p><p>设置置顶标志<br>打开：/themes/*/layout/_macro/post.swig，定位到<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if post.top %&#125;</span><br><span class="line">  &lt;i class=&quot;fa fa-thumb-tack&quot;&gt;&lt;/i&gt;</span><br><span class="line">  &lt;font color=7D26CD&gt;置顶&lt;/font&gt;</span><br><span class="line">  &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sun Apr 28 2019 16:58:30 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;在介绍博客主题优化这个话题之前，我想先介绍hexo主题的大体结构，便于后面将主题优化方面的东西。&lt;/p&gt;&lt;h2 id=&quot;hexo主题结构&quot;&gt;&lt;a
      
    
    </summary>
    
      <category term="hexo" scheme="http://www.liuyong520.cn/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://www.liuyong520.cn/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo之环境搭建</title>
    <link href="http://www.liuyong520.cn/2017/08/27/hexo-install/"/>
    <id>http://www.liuyong520.cn/2017/08/27/hexo-install/</id>
    <published>2017-08-27T02:56:51.000Z</published>
    <updated>2019-04-27T12:11:10.273Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Apr 28 2019 16:58:30 GMT+0800 (GMT+08:00) --><p>如果你和我一样是小白，那么恭喜你！看完这篇文章，你也可以拥有一个这样的博客啦！</p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在以前我们要维护一个专属于自己的blog，是比较麻烦的，要购买服务器，部署博客程序到服务器，还要维护相关数据和网络。这一类blog最为典型的例子就是WordPress。而今天我们要介绍的是如何基于Hexo博客快速的搭建我们自己服务器系列。</p><h2 id="hexo介绍"><a href="#hexo介绍" class="headerlink" title="hexo介绍"></a>hexo介绍</h2><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p><h2 id="hexo安装"><a href="#hexo安装" class="headerlink" title="hexo安装"></a>hexo安装</h2><p>hexo 是基于node.js环境的，所以安装前，您必须检查电脑中是否已安装下列应用程序：<a href="https://nodejs.org/en/" target="_blank" rel="noopener">node.js</a><br>如果您的电脑中已经安装上述必备程序，那么恭喜您！接下来只需要使用 npm 即可完成 Hexo 的安装。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p></p><p>如果您的电脑中未安装Node，那么就需要安装Node.js<br>详细安装步骤参考：<a href="http://www.liuyong520.cn/2017/08/26/nodejs-install/">http://www.liuyong520.cn/2017/08/26/nodejs-install/</a></p><p>再安装Hexo，在命令行（即Git Bash）运行以下命令：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p></p><p>至此Hexo的环境就搭建好了，下一步验证一下hexo<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">MacBook-Pro:_posts xxydliuyss$ hexo version</span><br><span class="line">hexo: 3.8.0</span><br><span class="line">hexo-cli: 1.1.0</span><br><span class="line">os: Darwin 18.5.0 darwin x64</span><br><span class="line">http_parser: 2.8.0</span><br><span class="line">node: 10.15.3</span><br><span class="line">v8: 6.8.275.32-node.51</span><br><span class="line">uv: 1.23.2</span><br><span class="line">zlib: 1.2.11</span><br><span class="line">ares: 1.15.0</span><br><span class="line">modules: 64</span><br><span class="line">nghttp2: 1.34.0</span><br><span class="line">napi: 3</span><br><span class="line">openssl: 1.1.0j</span><br><span class="line">icu: 62.1</span><br><span class="line">unicode: 11.0</span><br><span class="line">cldr: 33.1</span><br><span class="line">tz: 2018e</span><br></pre></td></tr></table></figure><p></p><p>这样hexo就安装完成了</p><h3 id="hexo命令介绍"><a href="#hexo命令介绍" class="headerlink" title="hexo命令介绍"></a>hexo命令介绍</h3><p>官网已经介绍的比较详细了这里就不再赘述了<br>详情请看官方命令地址：<a href="https://hexo.io/zh-cn/docs/commands" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/commands</a></p><h3 id="hexo快速新建博客"><a href="#hexo快速新建博客" class="headerlink" title="hexo快速新建博客"></a>hexo快速新建博客</h3><p>初始化Hexo，在命令行（即Git Bash）依次运行以下命令即可：</p><p>以下，即存放Hexo初始化文件的路径， 即站点目录。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init myproject</span><br><span class="line">$ cd myproject</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p></p><p>新建完成后，在路径下，会产生这些文件和文件夹：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><p></p><table><thead><tr><th>目录名或者文件名</th><th>详情介绍</th></tr></thead><tbody><tr><td>_config.yml</td><td>hexo 全局配置文件</td></tr><tr><td>package.json</td><td>nodejs 包配置文件</td></tr><tr><td>scaffolds</td><td>hexo模版文件夹hexo new filename 会对应根据模版文件生成文件</td></tr><tr><td>source</td><td>项目源代码文件目录</td></tr><tr><td>_drafts</td><td>为草稿原文件目录</td></tr><tr><td>_posts</td><td>项目发布文件目录 项目最终会根据这个目录下的文件生成html</td></tr><tr><td>themes</td><td>博客主题存放目录</td></tr></tbody></table><p>注：</p><p>hexo相关命令均在站点目录下，用Git Bash运行。</p><p>站点配置文件：站点目录下的_config.yml。</p><p>​ 路径为<folder>_config.yml</folder></p><p>主题配置文件：站点目录下的themes文件夹下的，主题文件夹下的_config.yml。</p><p>​ 路径为<folder>\themes\&lt;主题文件夹&gt;_config.yml</folder></p><ol start="2"><li>启动服务器。在路径下，命令行（即Git Bash）输入以下命令，运行即可：</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><ol start="3"><li>浏览器访问网址： <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> 就可以预览博客了<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556363959958.png" alt="图片"></li></ol><p>下一篇 我将介绍如何搭建自己的blog</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sun Apr 28 2019 16:58:30 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;如果你和我一样是小白，那么恭喜你！看完这篇文章，你也可以拥有一个这样的博客啦！&lt;/p&gt;&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; cla
      
    
    </summary>
    
      <category term="hexo" scheme="http://www.liuyong520.cn/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://www.liuyong520.cn/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>利用hexo搭建博客</title>
    <link href="http://www.liuyong520.cn/2017/08/27/creatblog/"/>
    <id>http://www.liuyong520.cn/2017/08/27/creatblog/</id>
    <published>2017-08-27T02:56:51.000Z</published>
    <updated>2019-04-27T16:22:09.846Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Apr 28 2019 16:58:30 GMT+0800 (GMT+08:00) --><p>如果你和我一样是小白，那么恭喜你！看完这篇文章，你也可以拥有一个这样的博客</p><hr><p>前面已经介绍过如何搭建hexo环境，现在我将介绍如何用hexo搭建自己的blog</p><h2 id="博客搭建"><a href="#博客搭建" class="headerlink" title="博客搭建"></a>博客搭建</h2><h3 id="实施方案"><a href="#实施方案" class="headerlink" title="实施方案"></a>实施方案</h3><h4 id="方案一：GithubPages"><a href="#方案一：GithubPages" class="headerlink" title="方案一：GithubPages"></a>方案一：GithubPages</h4><ol><li><p>创建Github账号</p></li><li><p>创建仓库 ，仓库名为：&lt;Github账号名称&gt;.github.io<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556370583717.png" alt="仓库名称"><br>点击settings<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556370714512.png" alt="settings"><br>往下翻就能看到githubPages，我这里是已经配置过了的，没有配置可以是select themes ，点击能够选择SkyII主题。（SkyII主题也是和hexo类似的blog的框架，这里不与介绍）</p></li><li><p>将本地Hexo博客推送到GithubPages<br>3.1. 安装hexo-deployer-git插件。在命令行（即Git Bash）运行以下命令即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>3.2. 添加SSH key。</p><ul><li><p>创建一个 SSH key 。在命令行（即Git Bash）输入以下命令， 回车三下即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;邮箱地址&quot;</span><br></pre></td></tr></table></figure></li><li><p>添加到 github。 复制密钥文件内容（路径形如C:\Users\Administrator.ssh\id_rsa.pub），粘贴到New SSH Key即可。</p></li><li><p>测试是否添加成功。在命令行（即Git Bash）依次输入以下命令，返回“You’ve successfully authenticated”即成功：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>3.3. 修改_config.yml（在站点目录下）。文件末尾修改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:&lt;Github账号名称&gt;/&lt;Github账号名称&gt;.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>注意：上面仓库地址写ssh地址，不写http地址。<br>3.4. 推送到GithubPages。在命令行（即Git Bash）依次输入以下命令， 返回INFO Deploy done: git即成功推送：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><p>等待1分钟左右，浏览器访问网址： https://&lt;Github账号名称&gt;.github.io<br>至此，您的Hexo博客已经搭建在GithubPages, 域名为https://&lt;Github账号名称&gt;.github.io。</p></li></ul></li></ol><h4 id="方案二：GithubPages-域名"><a href="#方案二：GithubPages-域名" class="headerlink" title="方案二：GithubPages + 域名"></a>方案二：GithubPages + 域名</h4><p>在方案一的基础上，添加自定义域名（您购买的域名）。我的是从阿里云购买的。</p><ol><li><p>域名解析<br>类型选择为 CNAME；</p><p>主机记录即域名前缀，填写为www；</p><p>记录值填写为&lt;Github账号名称&gt;.github.io；</p><p>解析线路，TTL 默认即可<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/屏幕快照_2019-04-27_21.28.51.png" alt="阿里云"><br>点击 liuyong520.cn<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556371873729.png" alt="域名解析"></p></li><li><p>仓库设置。<br>2.1. 打开博客仓库设置：<a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a>&lt;Github账号名称&gt;/&lt;Github账号名称&gt;.github.io/settings</p><p>2.2. 在Custom domain下，填写自定义域名，点击save。</p><p>2.3. 在站点目录的source文件夹下，创建并打开CNAME.txt，写入你的域名（如<a href="http://www.liuyong520.cn），保存，并重命名为CNAME。如图" target="_blank" rel="noopener">www.liuyong520.cn），保存，并重命名为CNAME。如图</a><br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556370801480.png" alt="githubpages"></p><ol start="3"><li><p>等待10分钟左右。<br>浏览器访问自定义域名。<a href="http://www.liuyong520.cn">http://www.liuyong520.cn</a></p><p>至此，您的Hexo博客已经解析到自定义域名，https://&lt;Github账号名称&gt;.github.io依然可用。</p></li></ol><h4 id="方案三：GithubPages-CodingPages-域名"><a href="#方案三：GithubPages-CodingPages-域名" class="headerlink" title="方案三：GithubPages + CodingPages + 域名"></a>方案三：GithubPages + CodingPages + 域名</h4></li></ol><p>GithubPages 在国内较慢，百度不收录，而CodingPages 在国外较快。所以在方案二的基础上，添加CodingPages 。</p><ol><li>创建Coding账号</li><li>创建仓库， 仓库名为：&lt;Coding账号名称&gt;</li><li>进入项目里『代码』页面，点击『一键开启静态 Pages』，稍等片刻CodingPages即可部署成功。<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556380352090.png" alt="enter description here"></li><li><p>将本地Hexo博客推送到CodingPages<br>4.1. 鉴于创建GithubPages 时，已经生成过公钥。可直接复制密钥文件内容（路径形如C:\Users\Administrator.ssh\id_rsa.pub）， 粘贴到新增公钥。<br>4.2. 测试是否添加成功。在命令行（即Git Bash）依次输入以下命令，返回“You’ve successfully authenticated”即成功：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@git.coding.net</span><br><span class="line">$ yes</span><br></pre></td></tr></table></figure><p>4.3. 修改_config.yml（在存放Hexo初始化文件的路径下）。文件末尾修改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">- type: git</span><br><span class="line">  repo: git@github.com:&lt;Github账号名称&gt;/&lt;Github账号名称&gt;.github.io.git</span><br><span class="line">  branch: master</span><br><span class="line">- type: git</span><br><span class="line">  repo: git@git.dev.tencent.com:&lt;Coding账号名称&gt;/&lt;Coding账号名称&gt;.git</span><br><span class="line"> branch: master</span><br></pre></td></tr></table></figure><p>4.4. 推送到GithubPages。在命令行（即Git Bash）依次输入以下命令， 返回INFO Deploy done: git即成功推送：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure></li><li><p>域名解析</p><ol><li><p>添加 CNAME 记录指向 &lt;Coding账号名称&gt;.coding.me</p><p>类型选择为 CNAME；</p><p>主机记录即域名前缀，填写为www；</p><p>记录值填写为&lt;Github账号名称&gt;.coding.me；</p><p>解析线路，TTL 默认即可。</p></li><li><p>添加 两条A 记录指向 192.30.252.153和192.30.252.154</p><p>类型选择为 A；</p><p>主机记录即域名前缀，填写为@；</p><p>记录值填写为192.30.252.153和192.30.252.154；</p><p>解析线路，境外或谷歌。<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556382087569.png" alt="enter description here"></p><ol start="3"><li>在『Pages 服务』设置页（<a href="https://dev.tencent.com/u/" target="_blank" rel="noopener">https://dev.tencent.com/u/</a>&lt;Coding账号名称&gt;/p/&lt;Coding账号名称&gt;/git/pages/settings）中绑定自定义域名<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556382059000.png" alt="enter description here"></li><li>至此，您的Hexo博客已经解析到自定义域名，https://&lt;Github账号名称&gt;.github.io和https://&lt;Coding账号名称&gt;.coding.me依然可用。</li></ol></li></ol></li></ol><h4 id="切换主题"><a href="#切换主题" class="headerlink" title="切换主题"></a>切换主题</h4><ul><li><p>选择主题<br>hexo主题是非常多的，默认的主题是landscape，您可以自主的在hexo官方网站上挑选自己喜欢的主题，网站：<a href="https://hexo.io/themes/" target="_blank" rel="noopener">https://hexo.io/themes/</a><br>推荐以下主题：<br><a href="https://github.com/shenliyang/hexo-theme-snippet#hexo-theme-snippet" target="_blank" rel="noopener">snippet</a><br><a href="https://github.com/iTimeTraveler/hexo-theme-hiero#hiero" target="_blank" rel="noopener">Hiero</a><br><a href="https://github.com/tangkunyin/hexo-theme-jsimple#jsimple" target="_blank" rel="noopener">Jsimple</a><br><a href="https://github.com/chaooo/hexo-theme-BlueLake#bluelake" target="_blank" rel="noopener">BlueLake</a><br><a href="https://github.com/cofess/hexo-theme-pure" target="_blank" rel="noopener">Pure</a><br><a href="https://github.com/theme-next/hexo-theme-next" target="_blank" rel="noopener">Next</a><br><a href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="noopener">Hueman</a><br>我这里选择的是Pure。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/cofess/hexo-theme-pure.git  themes/pure</span><br></pre></td></tr></table></figure><p>此时会在themes 目录下生成 pure目录<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556365705175.png" alt="目录"></p></li><li><p>应用主题<br>更改站点配置_config.yml 修改成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: &lt;主题文件夹的名称&gt;</span><br></pre></td></tr></table></figure></li><li><p>主题优化<br>以上主题都有比较详细的说明文档，本节主要解决主题优化的常见问题。</p><p>主题优化一般包括：</p><ul><li>设置「RSS」</li><li>添加「标签」页面</li><li>添加「分类」页面</li><li>设置「字体」</li><li>设置「代码高亮主题」</li><li>侧边栏社交链接</li><li>开启打赏功能</li><li>设置友情链接</li><li>腾讯公益404页面</li><li>站点建立时间</li><li>订阅微信公众号</li><li>设置「动画效果」</li><li>设置「背景动画」<br>下一次我将针对Pure进行主题方面的相关配置，以及讲解一下hexo主题的的实现原理的。这样你们针对不同的主题也就都能配置了。</li></ul></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sun Apr 28 2019 16:58:30 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;如果你和我一样是小白，那么恭喜你！看完这篇文章，你也可以拥有一个这样的博客&lt;/p&gt;&lt;hr&gt;&lt;p&gt;前面已经介绍过如何搭建hexo环境，现在我将介绍
      
    
    </summary>
    
      <category term="hexo" scheme="http://www.liuyong520.cn/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://www.liuyong520.cn/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>node.js环境搭建</title>
    <link href="http://www.liuyong520.cn/2017/08/26/nodejs-install/"/>
    <id>http://www.liuyong520.cn/2017/08/26/nodejs-install/</id>
    <published>2017-08-26T01:56:51.000Z</published>
    <updated>2019-04-27T09:42:47.606Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sun Apr 28 2019 16:58:30 GMT+0800 (GMT+08:00) --><h2 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h2><p>登录<img src="https://nodejs.org/en/" alt="node.js">官网下载对应的exe安装包。下载地址为：<img src="https://nodejs.org/en/download/" alt="https://nodejs.org/en/download/"><br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556354057260.png" alt="nodejs下载页面"><br>你可以根据不同平台系统选择你需要的Node.js安装包。</p><p>Node.js 历史版本下载地址：<a href="https://nodejs.org/dist/" target="_blank" rel="noopener">https://nodejs.org/dist/</a></p><p>注意：Linux上安装Node.js需要安装Python 2.6 或 2.7 ，不建议安装Python 3.0以上版本。</p><hr><h3 id="windows-上安装-node-js"><a href="#windows-上安装-node-js" class="headerlink" title="windows 上安装 node.js"></a>windows 上安装 node.js</h3><p>你可以采用以下两种方式来安装。</p><p>1、Windows 安装包(.msi)<br>32 位安装包下载地址 : <a href="https://nodejs.org/dist/v4.4.3/node-v4.4.3-x86.msi" target="_blank" rel="noopener">https://nodejs.org/dist/v4.4.3/node-v4.4.3-x86.msi</a></p><p>64 位安装包下载地址 : <a href="https://nodejs.org/dist/v4.4.3/node-v4.4.3-x64.msi" target="_blank" rel="noopener">https://nodejs.org/dist/v4.4.3/node-v4.4.3-x64.msi</a></p><p>本文实例以 v0.10.26 版本为例，其他版本类似， 安装步骤：</p><p>步骤 1 : 双击下载后的安装包 v0.10.26，如下所示：<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356341458.png" alt="安装图"><br>步骤 2: 点击以上的Run(运行)，将出现如下界面：<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356418282.png" alt="安装图"><br>步骤 3 : 勾选接受协议选项，点击 next（下一步） 按钮 :<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356471486.png" alt="enter description here"><br>步骤 4 : Node.js默认安装目录为 “C:\Program Files\nodejs\” , 你可以修改目录，并点击 next（下一步）：<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356504568.png" alt="enter description here"><br>步骤 5 : 点击树形图标来选择你需要的安装模式 , 然后点击下一步 next（下一步）<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356545218.png" alt="enter description here"><br>步骤 6 :点击 Install（安装） 开始安装Node.js。你也可以点击 Back（返回）来修改先前的配置。 然后并点击 next（下一步）：<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356578858.png" alt="enter description here"><br>点击 Finish（完成）按钮退出安装向导。<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356605083.png" alt="完成图"><br>检测PATH环境变量是否配置了Node.js，点击开始=》运行=》输入”cmd” =&gt; 输入命令”path”，输出如下结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PATH=C:\oraclexe\app\oracle\product\10.2.0\server\bin;C:\Windows\system32;</span><br><span class="line">C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;</span><br><span class="line">c:\python32\python;C:\MinGW\bin;C:\Program Files\GTK2-Runtime\lib;</span><br><span class="line">C:\Program Files\MySQL\MySQL Server 5.5\bin;C:\Program Files\nodejs\;</span><br><span class="line">C:\Users\rg\AppData\Roaming\npm</span><br></pre></td></tr></table></figure><p></p><p>我们可以看到环境变量中已经包含了C:\Program Files\nodejs\</p><p>检查Node.js版本<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\&gt; node --version</span><br><span class="line">v0.10.26</span><br></pre></td></tr></table></figure><p></p><p>2、Windows 二进制文件 (.exe)安装<br>32 位安装包下载地址 : <a href="http://nodejs.org/dist/v0.10.26/node.exe" target="_blank" rel="noopener">http://nodejs.org/dist/v0.10.26/node.exe</a></p><p>64 位安装包下载地址 : <a href="http://nodejs.org/dist/v0.10.26/x64/node.exe" target="_blank" rel="noopener">http://nodejs.org/dist/v0.10.26/x64/node.exe</a><br>安装步骤</p><p>步骤 1 : 双击下载的安装包 Node.exe ，将出现如下界面 :<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356900243.png" alt="enter description here"><br>点击 Run（运行）按钮将出现命令行窗口：<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356930002.png" alt="enter description here"><br>版本测试<br>进入 node.exe 所在的目录，如下所示<br><img src="https://www.github.com/liuyong520/pic/raw/master/小书匠/1556356957166.png" alt="enter description here"><br>如果你获得以上输出结果，说明你已经成功安装了Node.js。</p><h3 id="linux安装node-js"><a href="#linux安装node-js" class="headerlink" title="linux安装node.js"></a>linux安装node.js</h3><p>直接使用已编译好的包<br>Node 官网已经把 linux 下载版本更改为已编译好的版本了，我们可以直接下载解压后使用：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># wget https://nodejs.org/dist/v10.9.0/node-v10.9.0-linux-x64.tar.xz    // 下载</span><br><span class="line"># tar xf  node-v10.9.0-linux-x64.tar.xz       // 解压</span><br><span class="line"># cd node-v10.9.0-linux-x64/                  // 进入解压目录</span><br><span class="line"># ./bin/node -v                               // 执行node命令 查看版本</span><br><span class="line">v10.9.0</span><br></pre></td></tr></table></figure><p></p><p>解压文件的 bin 目录底下包含了 node、npm 等命令，我们可以使用 ln 命令来设置软连接<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/software/nodejs/bin/npm   /usr/local/bin/ </span><br><span class="line">ln -s /usr/software/nodejs/bin/node   /usr/local/bin/</span><br></pre></td></tr></table></figure><p></p><p>Ubuntu 源码安装 Node.js<br>以下部分我们将介绍在 Ubuntu Linux 下使用源码安装 Node.js 。 其他的 Linux 系统，如 Centos 等类似如下安装步骤。</p><p>在 Github 上获取 Node.js 源码：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo git clone https://github.com/nodejs/node.git</span><br><span class="line">Cloning into &apos;node&apos;...</span><br></pre></td></tr></table></figure><p></p><p>修改目录权限：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo chmod -R 755 node</span><br></pre></td></tr></table></figure><p></p><p>使用 ./configure 创建编译文件，并按照：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd node</span><br><span class="line">$ sudo ./configure</span><br><span class="line">$ sudo make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure><p></p><p>查看 node 版本：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node --version</span><br><span class="line">v0.10.25</span><br></pre></td></tr></table></figure><p></p><p>Ubuntu apt-get命令安装<br>命令格式如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nodejs</span><br><span class="line">sudo apt-get install npm</span><br></pre></td></tr></table></figure><p></p><p>CentOS 下源码安装 Node.js<br>1、下载源码，你需要在<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a> 下载最新的Nodejs版本，本文以v0.10.24为例:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src/</span><br><span class="line">wget http://nodejs.org/dist/v0.10.24/node-v0.10.24.tar.gz</span><br></pre></td></tr></table></figure><p></p><p>2、解压源码<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf node-v0.10.24.tar.gz</span><br></pre></td></tr></table></figure><p></p><p>3、 编译安装<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd node-v0.10.24</span><br><span class="line">./configure --prefix=/usr/local/node/0.10.24</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p></p><p>4、 配置NODE_HOME，进入profile编辑环境变量<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p></p><p>设置nodejs环境变量，在 <em>export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL</em> 一行的上面添加如下内容:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#set for nodejs</span><br><span class="line">export NODE_HOME=/usr/local/node/0.10.24</span><br><span class="line">export PATH=$NODE_HOME/bin:$PATH</span><br></pre></td></tr></table></figure><p></p><p>:wq保存并退出，编译/etc/profile 使配置生效<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p></p><p>验证是否安装配置成功<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p></p><p>输出 v0.10.24 表示配置成功<br>npm模块安装路径:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/node/0.10.24/lib/node_modules/</span><br></pre></td></tr></table></figure><p></p><p>注：Nodejs 官网提供了编译好的Linux二进制包，你也可以下载下来直接应用。</p><h3 id="Mac-OS-上安装"><a href="#Mac-OS-上安装" class="headerlink" title="Mac OS 上安装"></a>Mac OS 上安装</h3><p>你可以通过以下两种方式在 Mac OS 上来安装 node：</p><p>1、在官方下载网站</p><p>下载 pkg 安装包，直接点击安装即可。<br>2、使用 brew 命令来安装：<br></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure><p></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sun Apr 28 2019 16:58:30 GMT+0800 (GMT+08:00) --&gt;&lt;h2 id=&quot;安装node-js&quot;&gt;&lt;a href=&quot;#安装node-js&quot; class=&quot;headerlink&quot; title=&quot;安装node.js
      
    
    </summary>
    
      <category term="node" scheme="http://www.liuyong520.cn/categories/node/"/>
    
    
      <category term="node" scheme="http://www.liuyong520.cn/tags/node/"/>
    
  </entry>
  
</feed>
